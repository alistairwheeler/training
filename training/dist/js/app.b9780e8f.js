(function(t){function e(e){for(var r,i,o=e[0],c=e[1],l=e[2],d=0,u=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&u.push(n[i][0]),n[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);h&&h(e);while(u.length)u.shift()();return a.push.apply(a,l||[]),s()}function s(){for(var t,e=0;e<a.length;e++){for(var s=a[e],r=!0,o=1;o<s.length;o++){var c=s[o];0!==n[c]&&(r=!1)}r&&(a.splice(e--,1),t=i(i.s=s[0]))}return t}var r={},n={app:0},a=[];function i(e){if(r[e])return r[e].exports;var s=r[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=r,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(s,r,function(e){return t[e]}.bind(null,r));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var h=c;a.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"018e":function(t,e,s){"use strict";var r=s("2ac0"),n=s.n(r);n.a},"13e3":function(t,e,s){},"1fa9":function(t,e,s){"use strict";var r=s("eb40"),n=s.n(r);n.a},"2ac0":function(t,e,s){},4199:function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);var r=s("2b0e"),n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",{staticClass:"app"},[t.checkIfRouteIsLesson()?s("v-navigation-drawer",{attrs:{app:"",clipped:""},model:{value:this.drawerOpen,callback:function(e){t.$set(this,"drawerOpen",e)},expression:"this.drawerOpen"}},[s("v-treeview",{attrs:{items:this.treeView,"active-class":"treeview-lesson--active","open-all":"","open-on-click":"","item-key":"path","return-object":""},scopedSlots:t._u([{key:"label",fn:function(e){return[s("p",{on:{click:function(s){return t.navigateToLesson(e.item)}}},[t._v(t._s(e.item.name))])]}}],null,!1,2219507467)})],1):t._e(),s("v-app-bar",{attrs:{app:"",color:"primary",dark:"","clipped-left":""}},[t.checkIfRouteIsLesson()?s("v-app-bar-nav-icon",{on:{click:t.openOrCloseDrawer}}):t._e(),s("v-toolbar-title",{staticClass:"simplicite-logo",attrs:{id:"toolbar-title"},on:{click:function(e){return t.navigateHome()}}},[t._v("Simplicité\n        ")]),s("div",{staticClass:"flex-grow-1"}),s("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.checkIfRouteIsLesson(),expression:"checkIfRouteIsLesson()"}],attrs:{id:"previous-button",fab:"",icon:""},on:{click:function(e){return t.navigateToPreviousLesson()}}},[s("v-icon",[t._v("mdi-skip-previous")])],1),s("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.checkIfRouteIsLesson(),expression:"checkIfRouteIsLesson()"}],attrs:{id:"next-button",fab:"",icon:""},on:{click:function(e){return t.navigateToNextLesson()}}},[s("v-icon",[t._v("mdi-skip-next")])],1),s("v-toolbar-items",[s("v-btn",{attrs:{text:"",to:"/courses"}},[t._v("Cours")])],1)],1),s("v-content",{staticClass:"content"},[s("v-container",{staticClass:"router-container-2",attrs:{"pa-0":"","mt-1":"",fluid:""},on:{"test-event":function(e){return t.logMessage()}}},[s("router-view",{key:t.$route.fullPath}),s("v-snackbar",{attrs:{id:"snackbar",timeout:t.snbTimeOut},model:{value:t.snackBar,callback:function(e){t.snackBar=e},expression:"snackBar"}},[s("span",{attrs:{id:"snb-text"}},[t._v(" "+t._s(t.snbText)+" ")]),s("v-btn",{attrs:{color:"#F08A7B",text:""},on:{click:function(e){t.snackBar=!1}}},[t._v("FERMER")])],1)],1)],1)],1)},a=[],i=s("2f62"),o={name:"App",components:{},data:()=>({snackBar:!1,snbTimeOut:1200,snbText:""}),computed:{...Object(i["b"])(["treeView","drawerOpen","nextLessonPath","previousLessonPath"])},methods:{checkIfRouteIsLesson(){return this.$router.currentRoute.path.split("/lessonItem/").length>1},navigateToLesson(t){"category"===t.type?console.log("ITEM IS A CATEGORY, can't navigate there if you want the tree to be foldable"):"contentItem"===t.type?this.$router.push("/lessonItem"+t.path).catch(()=>console.log("Navigation Duplicated")):console.error("Error with the item type - not matching category or contentItem")},navigateToNextLesson(){let t=this.nextLessonPath;if(console.log(`nextPath : ${t}`),void 0!==t){let e=t.toString().substring(1);console.log(`pushing to ${e}`),this.$router.push("/lessonItem/"+e).catch(t=>console.error(t))}else this.shakeElement("next-button"),this.showMessage("Il n'y a plus de leçons dans ce cours")},navigateToPreviousLesson(){let t=this.previousLessonPath;if(console.log(`previousPath : ${t}`),void 0!==t){let e=t.toString().substring(1);console.log(`pushing to ${e}`),this.$router.push("/lessonItem/"+e)}else this.shakeElement("previous-button"),this.showMessage("Il n'y a plus de leçons dans ce cours")},navigateHome(){this.$router.push("/home").catch(()=>console.log("Navigation Duplicated"))},openOrCloseDrawer(){let t=!this.drawerOpen;this.$store.commit("UPDATE_DRAWER_OPEN",t)},shakeElement(t){document.getElementById(t).classList.add("shaked"),setTimeout(()=>document.getElementById(t).classList.remove("shaked"),150)},showMessage(t){this.snbText=t,this.snackBar=!0}}},c=o,l=(s("5c0b"),s("2877")),h=s("6544"),d=s.n(h),u=s("7496"),p=s("40dc"),m=s("5bc1"),g=s("8336"),C=s("a523"),_=s("a75b"),f=s("132d"),v=s("f774"),L=s("2db4"),I=s("2a7f"),y=s("eb2a"),P=Object(l["a"])(c,n,a,!1,null,null,null),T=P.exports;d()(P,{VApp:u["a"],VAppBar:p["a"],VAppBarNavIcon:m["a"],VBtn:g["a"],VContainer:C["a"],VContent:_["a"],VIcon:f["a"],VNavigationDrawer:v["a"],VSnackbar:L["a"],VToolbarItems:I["a"],VToolbarTitle:I["b"],VTreeview:y["a"]});var w=s("8c4f"),b=s("f309");r["a"].use(b["a"]);var O=new b["a"]({theme:{themes:{light:{primary:"#20477A",secondary:"#387ED1",accent:"#3cba3c",error:"#b71c1c"},dark:{primary:"#514FBF",secondary:"#b0bec5",accent:"#ff0011",error:"#b71c1c"}}},icons:{iconfont:"mdi"}}),D=s("998c"),E=s.n(D),k=s("bc3a"),x=s.n(k),A=s("a7fe"),$=s.n(A),R=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"lesson-item-wrapper"}},[s("div",{class:{large:!t.openDrawer,thin:t.openDrawer}},[s("h1",{staticClass:"lesson-title"},[t._v(t._s(t.lessonToDisplay.title))]),s("ul",{staticClass:"breadcrumb"},t._l(this.breadCrumbItems,(function(e,r){return s("li",{key:r,staticClass:"breadcrumb__item",on:{click:function(s){return t.breadCrumbItemClicked(e.path,r,t.breadCrumbItems.length)}}},[s("span",[t._v(" "+t._s(e.title))]),r!==t.breadCrumbItems.length-1?s("span",{staticClass:"breadcrumb__divider"},[t._v(" > ")]):t._e()])})),0),t.lessonToDisplay.Content?s("div",{staticClass:"lesson_content"},[s("div",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}],staticClass:"html-content",domProps:{innerHTML:t._s(t.lessonToDisplay.Content)}})]):t._e()]),s("div",{staticClass:"aside-content col-6"},[s("div",{staticClass:"aside-content__carousel-container"},[s("v-carousel",{attrs:{"hide-delimiters":"","show-arrows-on-hover":"",cycle:"",interval:"10000",progress:"",height:"100%"}},t._l(t.picturesURL,(function(t,e){return s("v-carousel-item",{key:e,attrs:{src:t}})})),1)],1),s("div",{staticClass:"video-container"},[s("iframe",{staticClass:"video-container__video-frame",attrs:{src:t.lessonToDisplay.videoUrl,frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""}})])])])},U=[],S={name:"LessonItem",data:()=>({lessonToDisplay:{},picturesURL:[]}),computed:{...Object(i["b"])(["getLessonWithPath","hierarchy","breadCrumb"]),openDrawer:function(){return this.$store.getters.drawerOpen},breadCrumbItems:function(){return this.breadCrumb(this.$router.currentRoute.path.split("lessonItem")[1])}},methods:{displayLesson(t){this.lessonToDisplay.title=t.title,this.lessonToDisplay.Content=t.content,this.lessonToDisplay.videoUrl=t.videoUrl,console.log("contentItem.videoUrl"),console.log(t.videoUrl),this.$store.commit("UPDATE_DISPLAYED_LESSON_PATH",t.path);let e={smp:this.$smp,lessonId:t.row_id};this.$store.dispatch("fetchPicturesURLs",e).then(t=>this.picturesURL=t).catch(t=>console.error(t))},breadCrumbItemClicked(t,e,s){e!==s-1&&this.$router.push("/courses/"+t).catch(t=>console.error(t))}},async created(){let t=this.$router.currentRoute.path.split("lessonItem"),e=t[1]?t[1]:"",s={smp:this.$smp};if(this.$store.commit("UPDATE_DRAWER_OPEN",!0),""!==e){let t=this.getLessonWithPath(e);void 0!==t?this.displayLesson(t):(s.itemPath=e,this.$store.dispatch("fetchContentItem",s).then(t=>{this.displayLesson(t)})),this.$store.dispatch("fetchHierarchy",s).catch(t=>console.error(t))}else console.error("error on the path of the lesson"+e)}},j=S,V=(s("ecf9"),s("5e66")),B=s("3e35"),H=Object(l["a"])(j,R,U,!1,null,"2ac974a0",null),M=H.exports;d()(H,{VCarousel:V["a"],VCarouselItem:B["a"]});var N=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"homepage-container"}},[s("div",{attrs:{id:"outer-div"}},[t._m(0),s("nav",[s("ul",{staticClass:"__links"},[s("li",[s("v-btn",{staticClass:"text-white",attrs:{"x-large":"",link:"",color:"primary"},on:{click:function(e){return t.redirectTo("https://simplicite.fr/")}}},[t._v("Discover our offers\n                    ")])],1),s("li",[s("v-btn",{staticClass:"text-white",attrs:{"x-large":"",link:"",color:"primary"},on:{click:function(e){return t.redirectTo("https://docs.simplicite.io/")}}},[t._v(" Read the Documentation\n                    ")])],1),s("li",[s("v-btn",{staticClass:"text-white",attrs:{"x-large":"",link:"",color:"primary"},on:{click:function(e){return t.redirectTo("https://simplicite.fr/cas-clients/")}}},[t._v("Watch Examples\n                    ")])],1)])])])])},F=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row-1"},[s("div",{attrs:{id:"video-wrapper"}},[s("iframe",{attrs:{src:"https://player.vimeo.com/video/359243007",width:"712",height:"400",frameborder:"0",allow:"autoplay; fullscreen",allowfullscreen:""}})]),s("div",{staticClass:"heading"},[s("h1",{staticClass:"heading__title"},[t._v("Simplicite Software Training Platform")]),s("p",{staticClass:"heading__promotion"},[t._v("\n                    Learn to master the Simplicite platform to help your company build "),s("span",{staticClass:"highlighted"},[t._v(" powerful applications")]),t._v(",\n                    at "),s("span",{staticClass:"highlighted"},[t._v(" lightning speed")])]),s("p",{staticClass:"heading__promotion"},[t._v(" This training will help you understand the basics of how\n                    our platform works and teach you the "),s("span",{staticClass:"highlighted"},[t._v(" good practices")]),t._v(" to become\n                    a great application designer ")])])])}],Y={name:"HomePage",methods:{redirectTo(t){window.location.href=t}}},G=Y,W=(s("018e"),Object(l["a"])(G,N,F,!1,null,"bf19bdf0",null)),J=W.exports;d()(W,{VBtn:g["a"]});var q=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"lesson-item-wrapper"}},[s("div",{attrs:{id:"wrapper"}},[s("h1",{staticClass:"courses-title"},[t._v("Tous les cours disponibles :")]),s("ItemList",{attrs:{"category-path":t.categoryPath}})],1)])},z=[],K=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"item-list-wrapper"},t._l(t.listToDisplay,(function(e){return s("v-card",{key:e.row_id,staticClass:"item-prev",on:{click:function(s){return t.onListItemClicked(e)}}},[s("div",{staticClass:"item-prev__picture-container"},[s("img",{staticClass:"item-prev__picture",attrs:{src:"https://cdn.vuetifyjs.com/images/cards/mountain.jpg",alt:"course logo"}})]),s("div",{staticClass:"item-prev__info-container"},[s("h2",{staticClass:"item-prev__name"},[t._v(t._s(e.title))]),s("p",{staticClass:"item-prev__long-description"},[t._v(t._s(e.longDescription))])])])})),1)},Q=[];class X{constructor(t,e,s,r,n,a,i){this.row_id=t,this.order=e,this.title=s,this.shortDescription=r,this.longDescription=n,this.itemType=a,this.path=i}static convertCategory(t){return new X(parseInt(t.row_id),parseInt(t.order),t.title,"Description d'une Catégorie",t.description,Z,t.path)}static convertContentItem(t){return new X(parseInt(t.row_id),parseInt(t.order),t.title,"Description d'un contenu",t.description,tt,t.path)}}const Z="category",tt="content";var et={name:"ItemList",props:["categoryPath"],data:()=>({listToDisplay:[],redirectToLesson:!1}),computed:{...Object(i["b"])(["categoriesAsListItems","allCategoriesLoaded","allChildrenAsItemList","childrenCategories","childrenLessons","allItemsLoaded"])},methods:{onListItemClicked(t){t.itemType===Z?this.$router.push("/courses"+t.path):t.itemType===tt?this.$router.push("/lessonItem"+t.path):console.error("there is an error on the itemType, it is : "+t.itemType)}},async created(){let t={smp:this.$smp,categoryPath:this.categoryPath};""===this.categoryPath?this.allCategoriesLoaded&&this.allItemsLoaded?this.listToDisplay.push(...this.categoriesAsListItems):await this.$store.dispatch("fetchCategories",t).then(()=>this.listToDisplay.push(...this.categoriesAsListItems)):this.allCategoriesLoaded&&this.allItemsLoaded?(this.listToDisplay.push(...this.childrenCategories(this.categoryPath)),this.listToDisplay.push(...this.childrenLessons(this.categoryPath))):await this.$store.dispatch("getCategoriesFromParent",t).then(()=>this.$store.dispatch("getLessonsFromCategory",t)).then(()=>{this.listToDisplay.push(...this.childrenCategories(this.categoryPath)),this.listToDisplay.push(...this.childrenLessons(this.categoryPath))})}},st=et,rt=(s("1fa9"),s("b0af")),nt=Object(l["a"])(st,K,Q,!1,null,"3d1c1648",null),at=nt.exports;d()(nt,{VCard:rt["a"]});var it={name:"Courses",components:{ItemList:at},data:()=>({categoryPath:""}),created(){console.log("Courses CREATED");let t=this.$router.currentRoute.path.split("courses/");this.categoryPath=t[1]?t[1]:""}},ot=it,ct=(s("de34"),Object(l["a"])(ot,q,z,!1,null,"102eb9ed",null)),lt=ct.exports,ht=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"lessons-wrapper"}},[s("div",{attrs:{id:"wrapper"}},[s("h1",{attrs:{id:"page-title"}},[t._v("Toutes les leçons disponibles :")]),t.emptyList?s("v-btn",{staticClass:"redirect-button ma-2",attrs:{outlined:"",color:"#387ED1"},on:{click:function(t){return this.$router.push("/courses")}}},[t._v("\n            Return to courses\n        ")]):t._e(),s("ItemList",{attrs:{itemType:t.lessonsOrSections,"course-id":t.courseID}})],1)])},dt=[],ut={name:"Lessons",components:{ItemList:at},data:()=>({displayedLessons:[],courseID:0,emptyList:!1,lessonsOrSections:"lessons"}),methods:{redirectToLesson(t){this.$router.push("/lessonItem/"+t)}},async created(){this.$route.params.courseId?this.courseID=parseInt(this.$route.params.courseId):this.$route.params.sectionId?(this.lessonsOrSections="sections",this.courseID=parseInt(this.$route.params.sectionId)):this.courseID=0}},pt=ut,mt=(s("f165"),Object(l["a"])(pt,ht,dt,!1,null,"4adfc5d7",null)),gt=mt.exports;d()(mt,{VBtn:g["a"]});const Ct=[{path:"/",component:J},{path:"/home",component:J},{path:"/courses",component:lt},{path:"/courses/:categoryPath",component:lt},{path:"/courses/*",component:lt},{path:"/lessons",component:gt},{path:"/lessonItem/*",component:M},{path:"/*",component:J}];var _t=new w["a"]({mode:"history",routes:Ct});class ft{constructor({row_id:t,trnLsnOrder:e,trnLsnTitle:s,trnLsnDescription:r,trnLsnVideoUrl:n,trnLsnContent:a,trnLsnPath:i,trnLsnCatId:o,trnLsnCatId__trnCatTitle:c,trnLsnCatId__trnCatPath:l}){this.row_id=parseInt(t),this.order=e,this.title=s,this.description=r,this.videoUrl=n,this.videoUrl=n,this.content=a,this.path=i,this.categoryId=o,this.categoryTitle=c,this.categoryPath=l}static toTreeViewItem({row_id:t,trnLsnTitle:e,trnLsnPath:s}){return{id:t,name:e,path:s,type:"contentItem"}}}class vt{constructor({row_id:t,trnCatOrder:e,trnCatTitle:s,trnCatDescription:r,trnCatPath:n,trnCatId:a,trnCatId__trnCatTitle:i,trnCatId__trnCatPath:o}){this.row_id=parseInt(t),this.order=e,this.title=s,this.description=r,this.path=n,this.parentId=a,this.parentTitle=i,this.parentPath=o}static convertExtCategoryToTreeView(t){let e=this.toTreeViewItem(t),s=[];return t.categories&&t.categories.map(t=>{s.push(this.convertExtCategoryToTreeView(t))}),t.lessons&&t.lessons.map(t=>{s.push(ft.toTreeViewItem(t))}),s.length>=1&&(e.children=s),e}static toTreeViewItem({row_id:t,trnCatTitle:e,trnCatPath:s}){return{id:t,name:e,path:s,type:"category"}}static findLessonBreadCrumb(t,e){let s=[],r={};if(t.categories){let n=t.categories.find(t=>e.includes(t.trnCatPath));void 0!==n?(r.title=n.trnCatTitle,r.path=n.trnCatPath,s.push(r),s.push(...this.findLessonBreadCrumb(n,e))):console.log("category is undefined")}else if(t.lessons){let n=t.lessons.find(t=>e.includes(t.trnLsnPath));void 0!==n?(r.title=n.trnLsnTitle,r.path=n.trnLsnPath,s.push(r)):console.log("lesson is undefined")}return s}static findParentsOfLesson(t,e){console.log("findParentsOfLesson");let s=[],r={};if(t.categories){let n=t.categories.find(t=>e.includes(t.trnCatPath));void 0!==n?(r.title=n.trnCatTitle,r.path=n.trnCatPath,s.push(r),s.push(...this.findParentsOfLesson(n,e))):console.log("category is undefined")}return s}}r["a"].use(i["a"]);var Lt=new i["a"].Store({state:{hierarchy:[],categories:[],items:[],displayLessonPath:"",allCategoriesLoaded:!1,allItemsLoaded:!1,drawerOpen:!1},getters:{drawerOpen:t=>{return t.drawerOpen},allCategoriesLoaded:t=>{return t.allCategoriesLoaded},allItemsLoaded:t=>{return t.allItemsLoaded},getLessonWithPath:t=>e=>{return t.items.find(t=>t.path===e)},categoriesAsListItems:t=>{return t.categories.map(t=>X.convertCategory(t))},childrenCategories:t=>e=>{return"/"!==e[0]&&(e="/"+e),t.categories.filter(t=>t.parentPath===e).map(t=>X.convertCategory(t))},childrenLessons:t=>e=>{return console.log("childrenLessons"),"/"!==e[0]&&(e="/"+e),t.items.filter(t=>t.categoryPath===e).map(t=>X.convertContentItem(t))},nextLessonPath:(t,e)=>{console.log("nextLessonPath");let s=t.displayLessonPath;console.log("currentPath : "+s);let r=e.sisterLessons(s),n=r.findIndex(t=>t.path===s);return n===r.length-1?void 0:r[n+1].path},previousLessonPath:(t,e)=>{let s=t.displayLessonPath,r=e.sisterLessons(s),n=r.findIndex(t=>t.path===s);return 0===n?void 0:r[n-1].path},sisterLessons:(t,e)=>t=>{console.log("sisterLessons"),console.log("lessonPath : "+t);let s=e.parentsList(t),r=s[s.length-1];return console.log("directPrent.path : "+r.path),e.childrenLessons(r.path).sort((t,e)=>{return parseInt(t.order)-parseInt(e.order)})},parentsList:t=>e=>{console.log("parentsList");let s=[],r={};return t.hierarchy.forEach(t=>{e.includes(t.trnCatPath)&&(r.title=t.trnCatTitle,r.path=t.trnCatPath,s.push(r),s.push(...vt.findParentsOfLesson(t,e)))}),s},breadCrumb:t=>e=>{let s=[],r={};return t.hierarchy.forEach(t=>{console.log(t.trnCatTitle),e.includes(t.trnCatPath)?(console.log(t.trnCatTitle+" is included in the path"),r.title=t.trnCatTitle,r.path=t.trnCatPath,s.push(r),s.push(...vt.findLessonBreadCrumb(t,e))):console.log(t.trnCatTitle+" is not included in the path")}),s},hierarchy:t=>{return t.hierarchy},treeView:t=>{let e=[];return t.hierarchy.map(t=>e.push(vt.convertExtCategoryToTreeView(t))),e}},mutations:{UPDATE_DRAWER_OPEN(t,e){t.drawerOpen=e},ALL_CATEGORIES_LOADED(t,e){t.allCategoriesLoaded=e},ALL_ITEMS_LOADED(t,e){t.allItemsLoaded=e},PUSH_CATEGORY(t,e){void 0===t.categories.find(t=>t.row_id===e.row_id)?t.categories.push(e):console.log("category already in the store")},PUSH_ITEM(t,e){void 0===t.items.find(t=>t.row_id===e.row_id)?t.items.push(e):console.log("item already in the store")},UPDATE_HIERARCHY(t,e){t.hierarchy=e},UPDATE_DISPLAYED_LESSON_PATH(t,e){r["a"].set(t,"displayLessonPath",e)}},actions:{async fetchCategories({commit:t},e){return new Promise((s,r)=>{let n=e.smp.getBusinessObject("TrnCategory");n.search(()=>{n.list?(n.list.forEach(e=>{t("PUSH_CATEGORY",new vt(e))}),t("ALL_CATEGORIES_LOADED",!0),s(n.list)):r("Could not load the categories")},{})})},async getCategoriesFromParent({commit:t},e){return new Promise((s,r)=>{let n=e.smp.getBusinessObject("TrnCategory");n.search(()=>{n.list?(n.list.forEach(e=>t("PUSH_CATEGORY",new vt(e))),s(n.list)):r("Could not load the categories")},{trnCatPath:e.categoryPath})})},async fetchContentItem({commit:t},e){return new Promise((s,r)=>{let n=e.smp.getBusinessObject("TrnLesson");n.search(()=>{if(n.list){let e=new ft(n.list[0]);t("PUSH_ITEM",e),s(e)}else r("Could not load the lesson")},{trnLsnPath:e.itemPath})})},async getLessons(t,e){return new Promise((s,r)=>{let n=e.getBusinessObject("TrnLesson");n.search(()=>{n.list?(n.list.forEach(e=>t.commit("PUSH_ITEM",new ft(e))),t.commit("ALL_ITEMS_LOADED",!0),s(n.list)):r("Could not load the lessons")},{})})},async getLessonsFromCategory({commit:t},e){return new Promise((s,r)=>{let n=e.smp.getBusinessObject("TrnLesson");n.search(()=>{n.list?(n.list.forEach(e=>t("PUSH_ITEM",new ft(e))),s(n.list)):r("Could not load the lessons")},{trnCatId:e.categoryId})})},async getChildrenOf({commit:t},e){let s=[],r=new Promise((r,n)=>{let a=e.smp.getBusinessObject("TrnCategory");a.search(()=>{a.list?(a.list.forEach(e=>{s.push(new vt(e)),t("PUSH_CATEGORY",new vt(e))}),r(a.list)):n("Could not load the categories")},{trnCatId:e.parentId})}),n=new Promise((r,n)=>{let a=e.smp.getBusinessObject("TrnLesson");a.search(()=>{a.list?(a.list.forEach(e=>{s.push(new ft(e)),t("PUSH_ITEM",new ft(e))}),r(a.list)):n("Could not load the lessons")},{trnLsnCatId:e.parentId})});Promise.all([r,n]).then(()=>console.log(s))},async fetchHierarchy({commit:t},e){let s=[{trnCatId:null,trnCatOrder:1010,trnCatDescription:"1",trnCatId__trnCatTitle:null,trnCatTitle:"cat1",trnCatPath:"/cat1",categories:[{trnCatId:"11",trnCatOrder:1020,trnCatDescription:"2",trnCatId__trnCatTitle:"cat1",trnCatTitle:"cat2",trnCatPath:"/cat1/cat2",categories:[{trnCatId:"12",trnCatOrder:1030,trnCatDescription:"3",trnCatId__trnCatTitle:"cat2",trnCatTitle:"cat3",trnCatPath:"/cat1/cat2/cat3",categories:[{trnCatId:"13",trnCatOrder:1040,trnCatDescription:"4",trnCatId__trnCatTitle:"cat3",trnCatTitle:"cat4",trnCatPath:"/cat1/cat2/cat3/cat4",row_id:"14",trnCatPicture:null,trnCatId__trnCatPath:"/cat1/cat2/cat3",lessons:[{trnLsnPath:"/cat1/cat2/cat3/cat4/lecon3",trnLsnOrder:300,trnLsnCatId__trnCatPath:"/cat1/cat2/cat3/cat4",trnLsnTitle:"Lecon 3",trnLsnDescription:"Une leçon pour la catégorie enfant 1, qui avait envie d'être maman",trnLsnVideoUrl:null,trnLsnContent:"<h1> je suis un titre de niveau 1</h1>",trnLsnCatId__trnCatTitle:"cat4",row_id:"3",trnLsnCatId:"14"},{trnLsnPath:"/cat1/cat2/cat3/cat4/lecon1",trnLsnOrder:10,trnLsnCatId__trnCatPath:"/cat1/cat2/cat3/cat4",trnLsnTitle:"Lecon1",trnLsnDescription:"LeconRecursive1",trnLsnVideoUrl:null,trnLsnContent:null,trnLsnCatId__trnCatTitle:"cat4",row_id:"7",trnLsnCatId:"14"}]}],row_id:"13",trnCatPicture:null,trnCatId__trnCatPath:"/cat1/cat2"}],row_id:"12",trnCatPicture:null,trnCatId__trnCatPath:"/cat1"}],row_id:"11",trnCatPicture:null,trnCatId__trnCatPath:null},{trnCatId:null,trnCatOrder:200,trnCatDescription:"Une deuxième catégorie pour plus de diversité",trnCatId__trnCatTitle:null,trnCatTitle:"Catégorie 2",trnCatPath:"/catgorie2",categories:[{trnCatId:"5",trnCatOrder:100,trnCatDescription:"Première catégorie créée pour utilisation dans le front Simplicité",trnCatId__trnCatTitle:"Catégorie 2",trnCatTitle:"Catégorie1",trnCatPath:"/catgorie2/catgorie1",categories:[{trnCatId:"4",trnCatOrder:300,trnCatDescription:"Une catégorie enfant pour tester ce feature",trnCatId__trnCatTitle:"Catégorie1",trnCatTitle:"Enfant 1",trnCatPath:"/catgorie2/catgorie1/enfant1",row_id:"6",trnCatPicture:null,trnCatId__trnCatPath:"/catgorie2/catgorie1"}],row_id:"4",trnCatPicture:null,trnCatId__trnCatPath:"/catgorie2",lessons:[{trnLsnPath:"/catgorie2/catgorie1/titre1",trnLsnOrder:1010,trnLsnCatId__trnCatPath:"/catgorie2/catgorie1",trnLsnTitle:"Titre 1",trnLsnDescription:"Description 1",trnLsnVideoUrl:null,trnLsnContent:null,trnLsnCatId__trnCatTitle:"Catégorie1",row_id:"4",trnLsnCatId:"4"}]}],row_id:"5",trnCatPicture:null,trnCatId__trnCatPath:null,lessons:[{trnLsnPath:"/catgorie2/titre2",trnLsnOrder:1020,trnLsnCatId__trnCatPath:"/catgorie2",trnLsnTitle:"Titre 2",trnLsnDescription:"Description 2",trnLsnVideoUrl:null,trnLsnContent:null,trnLsnCatId__trnCatTitle:"Catégorie 2",row_id:"5",trnLsnCatId:"5"}]}];return console.log("fetchHierarchy"),new Promise((r,n)=>{e.smp.getExternalObjectURL("TrnExternalTreeView");e.smp.getExternalObject(e=>{t("UPDATE_HIERARCHY",s),r(s)},"TrnExternalTreeView")})},async fetchPicturesURLs({commit:t},e){console.log("fetchPicture()"+e.lessonId);return new Promise((t,s)=>{let r=e.smp.getBusinessObject("TrnPicture");r.search(()=>{console.log("picture"),console.log(r),r.list?t(r.list.map(t=>e.smp.imageURL("TrnPicture","trnPicImage",t.row_id,t.trnPicImage,!1))):s("Impossible to fetch the pictures")},{trnPicLsnId:e.lessonId})})},exemplePictureFetching(){return new Promise((function(t,e){var s=smpAccess.app.getBusinessObject("RMUser");s.get((function(){console.log(JSON.stringify(s.item,null,4)),disp(smpAccess.app.imageURL("RMUser","usr_image_id",smpAccess.app.grant.userid,s.item.usr_image_id.id,!1)),t()}),smpAccess.app.grant.userid,{inlineDocs:"infos"})}))}}});r["a"].use($.a,x.a),r["a"].use(E.a),r["a"].config.productionTip=!1,r["a"].use(w["a"]),r["a"].use(i["a"]),r["a"].prototype.$smp=new Simplicite.Ajax("/app","api","designer","simplicite"),new r["a"]({el:"#app",store:Lt,render:t=>t(T),vuetify:O,router:_t}).$mount("#app")},"58f3":function(t,e,s){},"5c0b":function(t,e,s){"use strict";var r=s("13e3"),n=s.n(r);n.a},a238:function(t,e,s){},de34:function(t,e,s){"use strict";var r=s("a238"),n=s.n(r);n.a},eb40:function(t,e,s){},ecf9:function(t,e,s){"use strict";var r=s("4199"),n=s.n(r);n.a},f165:function(t,e,s){"use strict";var r=s("58f3"),n=s.n(r);n.a}});
//# sourceMappingURL=app.b9780e8f.js.map